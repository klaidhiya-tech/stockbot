-- Création de la base de données
CREATE DATABASE IF NOT EXISTS gestion_commandes 
CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

USE gestion_commandes;

-- Table fournisseurs
CREATE TABLE fournisseurs (
    id INT PRIMARY KEY AUTO_INCREMENT,
    code_fournisseur VARCHAR(20) UNIQUE NOT NULL,
    nom VARCHAR(100) NOT NULL,
    contact VARCHAR(100),
    email VARCHAR(100),
    telephone VARCHAR(20),
    adresse TEXT,
    delai_livraison_moyen INT DEFAULT 7,
    fiabilite DECIMAL(3,2) DEFAULT 5.0,
    actif BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Table categories
CREATE TABLE categories (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nom VARCHAR(100) NOT NULL,
    description TEXT,
    actif BOOLEAN DEFAULT true
);

-- Table produits
CREATE TABLE produits (
    id INT PRIMARY KEY AUTO_INCREMENT,
    code_produit VARCHAR(20) UNIQUE NOT NULL,
    code_barre VARCHAR(50),
    nom VARCHAR(100) NOT NULL,
    description TEXT,
    categorie_id INT,
    prix_achat DECIMAL(10,2) DEFAULT 0,
    unite VARCHAR(20) DEFAULT 'unité',
    seuil_min INT DEFAULT 10,
    seuil_max INT DEFAULT 100,
    stock_actuel INT DEFAULT 0,
    marge_securite DECIMAL(5,2) DEFAULT 0.2,
    consommation_moyenne DECIMAL(10,2) DEFAULT 0,
    consommation_maximale DECIMAL(10,2) DEFAULT 0,
    delai_livraison INT DEFAULT 7,
    fournisseur_id INT,
    actif BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (categorie_id) REFERENCES categories(id),
    FOREIGN KEY (fournisseur_id) REFERENCES fournisseurs(id)
);

-- Insertion des fournisseurs
INSERT INTO fournisseurs (code_fournisseur, nom) VALUES
('F2001', 'Société Nour Distribution'),
('F2002', 'Tunifood SARL'),
('F2012', 'Sodimas Agro'),
('F2022', 'Centrale Deyri'),
('F2032', 'MarsaProvi Tunisie'),
('F2042', 'NetPro Services'),
('F2052', 'Hygiène Plus'),
('F2062', 'Clinix Tunisie'),
('F2072', 'Safeclean'),
('F2082', 'Top Nettoyage'),
('F2092', 'BioSanté Distribution'),
('F2102', 'Tunipharma'),
('F2112', 'MedClean Pro'),
('F2122', 'HygiPlus Santé'),
('F2132', 'ParaTop Tunisie');

-- Insertion des catégories
INSERT INTO categories (nom, description) VALUES
('Produits alimentaires', 'Produits alimentaires de base'),
('Produits d''entretien', 'Produits pour l''entretien et le nettoyage'),
('Parapharmacie & hygiène', 'Produits de parapharmacie et d''hygiène personnelle');

-- Insertion des produits (150 produits)
INSERT INTO produits (code_produit, code_barre, nom, categorie_id, stock_actuel, consommation_moyenne, consommation_maximale, delai_livraison, seuil_min, seuil_max, fournisseur_id) VALUES
('P1001', '619025528', 'Huile d''olive extra vierge 1L', 1, 152, 69, 85, 3, 207, 255, 1),
('P1002', '619031638', 'Couscous moyen 1kg', 1, 485, 51, 77, 3, 153, 231, 1),
('P1003', '619043175', 'Tomate concentrée 800g', 1, 398, 7, 33, 3, 21, 99, 1),
('P1004', '619045784', 'Pâtes coquillettes 500g', 1, 320, 5, 39, 3, 15, 117, 1),
('P1005', '619056025', 'Harissa artisanale 400g', 1, 156, 9, 21, 3, 27, 63, 1),
('P1006', '619057911', 'Lait UHT demi-écrémé 1L', 1, 121, 18, 49, 3, 54, 147, 1),
('P1007', '619066065', 'Riz étuvé 1kg', 1, 238, 31, 62, 3, 93, 186, 1),
('P1008', '619066446', 'Farine blanche 1kg', 1, 70, 13, 51, 3, 39, 153, 1),
('P1009', '619068839', 'Levure boulangère 100g', 1, 152, 19, 44, 3, 57, 132, 1),
('P1010', '619080421', 'Pois chiches secs 500g', 1, 171, 46, 80, 3, 138, 240, 1),
('P1011', '619088005', 'Lentilles blondes 1kg', 1, 264, 55, 92, 6, 330, 552, 2),
('P1012', '619091112', 'Couscous complet 500g', 1, 380, 67, 99, 6, 402, 594, 2),
('P1013', '619094405', 'Pâtes spaghetti 1kg', 1, 137, 56, 93, 6, 336, 558, 2),
('P1014', '619130355', 'Sucre cristallisé 1kg', 1, 422, 8, 17, 6, 48, 102, 2),
('P1015', '619151246', 'Huile végétale 1L', 1, 149, 27, 50, 6, 162, 300, 2),
('P1016', '619155567', 'Thé vert en sachets', 1, 409, 19, 27, 6, 114, 162, 2),
('P1017', '619162310', 'Lait concentré sucré', 1, 201, 47, 86, 6, 282, 516, 2),
('P1018', '619174904', 'Chocolat en poudre', 1, 180, 33, 54, 6, 198, 324, 2),
('P1019', '619201073', 'Sel fin 500g', 1, 199, 40, 72, 6, 240, 432, 2),
('P1020', '619215026', 'Semoule fine 1kg', 1, 358, 17, 51, 6, 102, 306, 2),
('P1021', '619216984', 'Riz long grain 1kg', 1, 307, 36, 69, 7, 252, 483, 3),
('P1022', '619224374', 'Maïs en conserve', 1, 393, 75, 85, 7, 525, 595, 3),
('P1023', '619231618', 'Purée de tomate 500g', 1, 463, 63, 102, 7, 441, 714, 3),
('P1024', '619241660', 'Lait en poudre 400g', 1, 343, 32, 60, 7, 224, 420, 3),
('P1025', '619247912', 'Haricots blancs secs', 1, 435, 70, 103, 7, 490, 721, 3),
('P1026', '619252154', 'Sauce piquante', 1, 241, 46, 81, 7, 322, 567, 3),
('P1027', '619278009', 'Eau minérale 1.5L', 1, 493, 49, 88, 7, 343, 616, 3),
('P1028', '619283477', 'Fromage fondu portions', 1, 326, 66, 103, 7, 462, 721, 3),
('P1029', '619299058', 'Beurre salé 250g', 1, 210, 61, 86, 7, 427, 602, 3),
('P1030', '619304294', 'Crème fraîche 20cl', 1, 363, 10, 46, 7, 70, 322, 3),
('P1031', '619304880', 'Yaourt nature 125g', 1, 71, 32, 59, 3, 96, 177, 4),
('P1032', '619305328', 'Lait fermenté (rayeb)', 1, 302, 32, 69, 3, 96, 207, 4),
('P1033', '619311980', 'Mozzarella râpée 200g', 1, 285, 48, 55, 3, 144, 165, 4),
('P1034', '619321058', 'Fromage type gruyère', 1, 394, 34, 56, 3, 102, 168, 4),
('P1035', '619322558', 'Beurre fermier 200g', 1, 98, 66, 95, 3, 198, 285, 4),
('P1036', '619324952', 'Œufs frais (boîte de 6)', 1, 108, 79, 114, 3, 237, 342, 4),
('P1037', '619351401', 'Margarine 500g', 1, 219, 66, 73, 3, 198, 219, 4),
('P1038', '619360981', 'Lait entier UHT', 1, 237, 5, 33, 3, 15, 99, 4),
('P1039', '619363303', 'Lait sans lactose', 1, 320, 31, 67, 3, 93, 201, 4),
('P1040', '619363870', 'Fromage frais tartinable', 1, 239, 66, 92, 3, 198, 276, 4),
('P1041', '619367588', 'Jus d''orange 1L', 1, 495, 7, 34, 5, 35, 170, 5),
('P1042', '619376576', 'Sirop menthe 70cl', 1, 224, 74, 80, 5, 370, 400, 5),
('P1043', '619376801', 'Vinaigre de cidre', 1, 495, 76, 107, 5, 380, 535, 5),
('P1044', '619391499', 'Mayonnaise 250g', 1, 100, 31, 37, 5, 155, 185, 5),
('P1045', '619397701', 'Moutarde douce', 1, 413, 13, 43, 5, 65, 215, 5),
('P1046', '619406330', 'Ketchup 500g', 1, 104, 66, 87, 5, 330, 435, 5),
('P1047', '619436531', 'Pâtes torsades 500g', 1, 293, 41, 78, 5, 205, 390, 5),
('P1048', '619436664', 'Couscous fin', 1, 369, 55, 68, 5, 275, 340, 5),
('P1049', '619441921', 'Sablés au beurre', 1, 180, 48, 81, 5, 240, 405, 5),
('P1050', '619443443', 'Confiture de fraise 350g', 1, 356, 28, 58, 5, 140, 290, 5),
('P1051', '619443607', 'Liquide vaisselle citron 1L', 2, 184, 63, 102, 9, 567, 918, 6),
('P1052', '619445629', 'Eau de javel parfumée 2L', 2, 70, 36, 65, 9, 324, 585, 6),
('P1053', '619446866', 'Nettoyant sol pin 1L', 2, 378, 56, 84, 9, 504, 756, 6),
('P1054', '619448621', 'Spray vitres 500ml', 2, 216, 66, 83, 9, 594, 747, 6),
('P1055', '619457199', 'Crème à récurer', 2, 323, 62, 73, 9, 558, 657, 6),
('P1056', '619464991', 'Détergent WC', 2, 437, 56, 80, 9, 504, 720, 6),
('P1057', '619474451', 'Détartrant salle de bain', 2, 138, 16, 21, 9, 144, 189, 6),
('P1058', '619476252', 'Désodorisant d''intérieur', 2, 365, 43, 55, 9, 387, 495, 6),
('P1059', '619484561', 'Sacs poubelle 30L', 2, 63, 6, 26, 9, 54, 234, 6),
('P1060', '619484805', 'Éponge multi-usage', 2, 291, 7, 25, 9, 63, 225, 6),
('P1061', '619485729', 'Liquide désinfectant', 2, 314, 60, 76, 15, 900, 1140, 7),
('P1062', '619503173', 'Chiffons microfibres', 2, 395, 63, 90, 15, 945, 1350, 7),
('P1063', '619505999', 'Gel WC bleu', 2, 102, 6, 25, 15, 90, 375, 7),
('P1064', '619515410', 'Brosse WC avec support', 2, 435, 6, 38, 15, 90, 570, 7),
('P1065', '619516060', 'Lingettes désinfectantes', 2, 389, 58, 96, 15, 870, 1440, 7),
('P1066', '619526963', 'Spray multi-surfaces', 2, 141, 5, 11, 15, 75, 165, 7),
('P1067', '619531409', 'Balai à franges', 2, 416, 23, 59, 15, 345, 885, 7),
('P1068', '619540140', 'Gant de ménage', 2, 493, 6, 33, 15, 90, 495, 7),
('P1069', '619547953', 'Savon mains liquide', 2, 477, 57, 83, 15, 855, 1245, 7),
('P1070', '619555183', 'Javel concentrée', 2, 313, 48, 77, 15, 720, 1155, 7),
('P1071', '619558437', 'Désinfectant sols 5L', 2, 480, 36, 62, 2, 72, 124, 8),
('P1072', '619565273', 'Lavette cuisine', 2, 84, 74, 100, 2, 148, 200, 8),
('P1073', '619571156', 'Nettoyant vitres anti-traces', 2, 255, 36, 46, 2, 72, 92, 8),
('P1074', '619574138', 'Spray anti-calcaire', 2, 130, 72, 91, 2, 144, 182, 8),
('P1075', '619575558', 'Spray anti-insectes', 2, 469, 59, 96, 2, 118, 192, 8),
('P1076', '619575580', 'Papier essuie-tout', 2, 99, 79, 91, 2, 158, 182, 8),
('P1077', '619576417', 'Déboucheur canalisations', 2, 409, 60, 69, 2, 120, 138, 8),
('P1078', '619577474', 'Seau plastique 10L', 2, 437, 21, 29, 2, 42, 58, 8),
('P1079', '619587176', 'Balai espagnol', 2, 51, 42, 52, 2, 84, 104, 8),
('P1080', '619600660', 'Gant latex', 2, 439, 28, 64, 2, 56, 128, 8),
('P1081', '619617260', 'Détergent cuisine', 2, 103, 73, 107, 8, 584, 856, 9),
('P1082', '619635208', 'Lingettes sols parfumées', 2, 155, 74, 113, 8, 592, 904, 9),
('P1083', '619635871', 'Dégraissant puissant', 2, 309, 15, 35, 8, 120, 280, 9),
('P1084', '619660085', 'Nettoyant inox', 2, 359, 20, 37, 8, 160, 296, 9),
('P1085', '619662903', 'Spray désodorisant', 2, 240, 77, 111, 8, 616, 888, 9),
('P1086', '619670263', 'Produit lave-vaisselle', 2, 451, 63, 86, 8, 504, 688, 9),
('P1087', '619671268', 'Pastilles WC', 2, 267, 74, 95, 8, 592, 760, 9),
('P1088', '619684292', 'Brosse sol rigide', 2, 93, 7, 30, 8, 56, 240, 9),
('P1089', '619685647', 'Savon noir liquide', 2, 211, 24, 56, 8, 192, 448, 9),
('P1090', '619696584', 'Javel pastille', 2, 251, 63, 93, 8, 504, 744, 9),
('P1091', '619699888', 'Vinaigre blanc', 2, 495, 40, 70, 3, 120, 210, 10),
('P1092', '619701880', 'Nettoyant four', 2, 319, 23, 50, 3, 69, 150, 10),
('P1093', '619707258', 'Liquide vaisselle aloe vera', 2, 400, 71, 84, 3, 213, 252, 10),
('P1094', '619715187', 'Éponge grattoir', 2, 353, 23, 39, 3, 69, 117, 10),
('P1095', '619719175', 'Papier toilette', 2, 320, 24, 29, 3, 72, 87, 10),
('P1096', '619721867', 'Recharge savon mousse', 2, 264, 75, 80, 3, 225, 240, 10),
('P1097', '619725062', 'Spray désinfectant textile', 2, 301, 56, 94, 3, 168, 282, 10),
('P1098', '619733581', 'Cire carrelage', 2, 239, 37, 73, 3, 111, 219, 10),
('P1099', '619733698', 'Raclettes vitres', 2, 345, 44, 73, 3, 132, 219, 10),
('P1100', '619752007', 'Rouleaux essuie-tout industriels', 2, 262, 43, 48, 3, 129, 144, 10),
('P1101', '619752017', 'Gel hydroalcoolique 500ml', 3, 257, 5, 25, 5, 25, 125, 11),
('P1102', '619765487', 'Masques chirurgicaux', 3, 286, 15, 24, 5, 75, 120, 11),
('P1103', '619769347', 'Thermomètre frontal', 3, 387, 61, 87, 5, 305, 435, 11),
('P1104', '619772278', 'Crème hydratante visage', 3, 416, 54, 87, 5, 270, 435, 11),
('P1105', '619774685', 'Lait corporel bébé', 3, 102, 27, 34, 5, 135, 170, 11),
('P1106', '619788538', 'Shampooing doux', 3, 329, 35, 51, 5, 175, 255, 11),
('P1107', '619807543', 'Pansements adhésifs', 3, 459, 46, 76, 5, 230, 380, 11),
('P1108', '619813812', 'Spray antiseptique', 3, 266, 11, 31, 5, 55, 155, 11),
('P1109', '619822398', 'Lingettes bébé', 3, 301, 20, 46, 5, 100, 230, 11),
('P1110', '619823618', 'Savon antiseptique', 3, 237, 64, 97, 5, 320, 485, 11),
('P1111', '619832020', 'Gants en latex', 3, 429, 6, 24, 8, 48, 192, 12),
('P1112', '619832367', 'Spray nez isotonic', 3, 90, 5, 37, 8, 40, 296, 12),
('P1113', '619832611', 'Vitamine C comprimés', 3, 206, 52, 61, 8, 416, 488, 12),
('P1114', '619833908', 'Tensiomètre manuel', 3, 64, 16, 50, 8, 128, 400, 12),
('P1115', '619841310', 'Bain de bouche antiseptique', 3, 350, 73, 82, 8, 584, 656, 12),
('P1116', '619841631', 'Crème solaire SPF50', 3, 114, 41, 57, 8, 328, 456, 12),
('P1117', '619846087', 'Gel anti-acné', 3, 394, 36, 56, 8, 288, 448, 12),
('P1118', '619847137', 'Compresses stériles', 3, 376, 13, 43, 8, 104, 344, 12),
('P1119', '619852682', 'Lotion antipelliculaire', 3, 58, 23, 53, 8, 184, 424, 12),
('P1120', '619868582', 'Brosse à dents souple', 3, 393, 52, 77, 8, 416, 616, 12),
('P1121', '619872714', 'Alcool 70°', 3, 178, 7, 44, 8, 56, 352, 13),
('P1122', '619880409', 'Bétadine solution', 3, 185, 24, 58, 8, 192, 464, 13),
('P1123', '619886965', 'Spray désinfectant mains', 3, 112, 28, 55, 8, 224, 440, 13),
('P1124', '619888205', 'Lingettes antiseptiques', 3, 188, 58, 72, 8, 464, 576, 13),
('P1125', '619888355', 'Crème cicatrisante', 3, 130, 37, 46, 8, 296, 368, 13),
('P1126', '619889544', 'Thermomètre digital', 3, 441, 28, 66, 8, 224, 528, 13),
('P1127', '619892363', 'Baume à lèvres', 3, 212, 79, 114, 8, 632, 912, 13),
('P1128', '619893015', 'Savon dermatologique', 3, 468, 76, 90, 8, 608, 720, 13),
('P1129', '619902495', 'Gaze stérile', 3, 338, 40, 63, 8, 320, 504, 13),
('P1130', '619908192', 'Gel lubrifiant', 3, 428, 42, 78, 8, 336, 624, 13),
('P1131', '619911992', 'Sérum physiologique', 3, 310, 29, 34, 9, 261, 306, 14),
('P1132', '619921882', 'Crème anti-démangeaisons', 3, 280, 22, 31, 9, 198, 279, 14),
('P1133', '619924823', 'Déodorant peau sensible', 3, 90, 70, 78, 9, 630, 702, 14),
('P1134', '619925946', 'Gel intime', 3, 77, 58, 78, 9, 522, 702, 14),
('P1135', '619926678', 'Trousse de secours', 3, 184, 39, 67, 9, 351, 603, 14),
('P1136', '619934376', 'Masques en tissu', 3, 250, 65, 85, 9, 585, 765, 14),
('P1137', '619940963', 'Shampooing antichute', 3, 377, 45, 51, 9, 405, 459, 14),
('P1138', '619945510', 'Dentifrice fluoré', 3, 317, 37, 69, 9, 333, 621, 14),
('P1139', '619946021', 'Fil dentaire', 3, 467, 72, 108, 9, 648, 972, 14),
('P1140', '619948776', 'Gel jambes lourdes', 3, 82, 37, 68, 9, 333, 612, 14),
('P1141', '619952807', 'Lait démaquillant', 3, 97, 18, 42, 2, 36, 84, 15),
('P1142', '619954835', 'Lotion tonique', 3, 456, 25, 53, 2, 50, 106, 15),
('P1143', '619960807', 'Baume réparateur', 3, 111, 52, 68, 2, 104, 136, 15),
('P1144', '619970721', 'Spray rafraîchissant visage', 3, 265, 24, 63, 2, 48, 126, 15),
('P1145', '619982544', 'Vitamines multivitaminées', 3, 342, 12, 49, 2, 24, 98, 15),
('P1146', '619982855', 'Gant exfoliant', 3, 148, 11, 48, 2, 22, 96, 15),
('P1147', '619982909', 'Bandage auto-adhésif', 3, 221, 71, 87, 2, 142, 174, 15),
('P1148', '619984777', 'Compresse froide instantanée', 3, 409, 21, 28, 2, 42, 56, 15),
('P1149', '619985269', 'Gouttes pour les yeux', 3, 263, 37, 42, 2, 74, 84, 15),
('P1150', '619987425', 'Huile d''amande douce', 3, 84, 52, 89, 2, 104, 178, 15);